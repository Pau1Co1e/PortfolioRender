$('form').on('submit',function(event){event.preventDefault();const fileInput=document.getElementById('file');const file=fileInput.files[0];if(!file){alert('Please select a file.');return}
const formData=new FormData();formData.append('file',file);const csrfToken=$('input[name="csrf_token"]').val();formData.append('csrf_token',csrfToken);$.ajax({url:'/fractal',type:'POST',data:formData,contentType:!1,processData:!1,success:function(response){if(response.fractalDimension!==undefined){window.location.href=`/fractal_result?fractal_dimension=${response.fractalDimension}&original=${response.image_paths.original}&grayscale=${response.image_paths.grayscale}&binary=${response.image_paths.binary}&analysis=${response.image_paths.analysis}`}else{alert("Error: Fractal Dimension is undefined.")}},error:function(xhr,status,error){console.error("Error calculating fractal dimension.");alert("Error calculating fractal dimension.")}})})